//>>built
define("net/apachegui/EditorAutoSuggest",["dojo/_base/declare","dojo/dom","dojo/on","dojo/query","net/apachegui/AutoSuggest"],function(f,g,l,h,k){return f(null,{editor:null,editorInstance:null,autoSuggest:null,constructor:function(a,d){var b=this;this.editor=a;this.editorInstance=d;var c=this.editor.getOption("onChange");this.editor.setOption("onChange",function(){c();b.updateAutoSuggest()});this.loadAutoSuggest();this.addListeners()},enableHover:function(){this.autoSuggest.enableHover()},disableHover:function(){this.autoSuggest.disableHover()},
loadAutoSuggest:function(){var a=this;this.autoSuggest=new k({hoverContainer:g.byId("fileform"),hoverClass:"cm-variable",onShow:function(){CodeMirror.keyMap.basic.Up="";CodeMirror.keyMap.basic.Down="";CodeMirror.keyMap.basic.Left="";CodeMirror.keyMap.basic.Right="";CodeMirror.keyMap.basic.Enter=""},onHide:function(){CodeMirror.keyMap.basic.Up="goLineUp";CodeMirror.keyMap.basic.Down="goLineDown";CodeMirror.keyMap.basic.Left="goCharLeft";CodeMirror.keyMap.basic.Right="goCharRight";CodeMirror.keyMap.basic.Enter=
"newlineAndIndent"},onHighlight:function(d){a.editor.focus()},onSelect:function(d){var b=a.editor.getLine(a.editor.getCursor().line),c=b.search(/\S/m);"\x3c"==b[c]&&c++;var e=b.substring(c).search(/\s/m),e=-1==e?b.length:e+c,b=b.replace(b.substring(c,e),d);a.editor.setLine(a.editor.getCursor().line,b);a.editor.setCursor({line:a.editor.getCursor().line,ch:c+d.length});a.editor.focus()}})},getCursorCoords:function(){var a=this.editor.cursorCoords(!0,"page"),d=a.x,a=a.y;a<window.innerHeight/2&&(a+=18);
return{xpos:d,ypos:a}},updateAutoSuggest:function(){if(this.autoSuggest&&"conf"==this.editorInstance.getMode()){var a=this.getCursorCoords();this.autoSuggest.updateSuggestions(this.editor.getLine(this.editor.getCursor().line),this.editor.getCursor().ch,a.xpos,a.ypos)}},addListeners:function(){var a=this;h(".CodeMirror-scroll").on("scroll",function(){a.autoSuggest&&a.autoSuggest.hideAll()})}})});